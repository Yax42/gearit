
-- #BeginAutoGenerated
-- Auto generated code, do NOT modify

-- #EndAutoGenerated


-- DEPLACEMENT ---------------------------------------
v = Input:PadStick_X(true)
highSpeed = v * v * v
spot9.FreeWheel = Input:PadPressed(P_Y)
spot10.FreeWheel = Input:PadPressed(P_Y)

spot9.Motor = highSpeed
spot10.Motor = highSpeed
	
if Input:PadPressed(P_LeftTrigger) and not shelling then
	spot7.Motor = -0.9
	spot8.Motor = 0.9
else
	spot7.Motor = 0.05
	spot8.Motor = -0.05
end
-- CARAPACE ---------------------------------------

if Input:PadJustPressed(P_X) then
	shelling = true
	if inShell then
		shellMin = 0
		shellMax = 0.1
	else
		shellMin = 0.4
		shellMax = 0.5
	end
end
if shelling then
	ok = true
	spot9.FreeWheel = true
	spot10.FreeWheel = true
	if inShell then
		if not spot7:isBetween(0, 0.1) then		
			spot7:AddLimitsCycle(1)
			spot7.Motor = 0.1
			ok = false
		end
		if not spot8:isBetween(-0.1, 0) then		
			spot8:AddLimitsCycle(-1)
			spot8.Motor = -0.1
			ok = false
		end
	else
			if not spot7:isBetween(0.5, 0.6) then		
			spot7:AddLimitsCycle(1)
			spot7.Motor = 0.1
			ok = false
		end
		if not spot8:isBetween(-0.6, -0.5) then		
			spot8:AddLimitsCycle(-1)
			spot8.Motor = -0.1
			ok = false
		end
	end
	if ok then
		shelling = false
		inShell = not inShell
	end
end

-- RAQUETTE ---------------------------------------
if Input:PadPressed(P_RightTrigger) and not isTortue then
	spot3.Motor = -1
	spot1.Motor = 1
	spot4.Motor = 1
	spot2.Motor = -1
else
	spot3.Motor = 0.2
	spot1.Motor = -0.2
	spot4.Motor = -0.2
	spot2.Motor = 0.2
end
v = Input:PadStick_X(false)
spot0.Motor =  v * v * v * 0.1

-- TORTUE ---------------------------------------
if Input:PadPressed(P_RightShoulder) then
	isTortue = true
	spot4.Motor = 0.1
	spot2.Motor = -0.1
	count = 20
elseif isTortue then
	spot4.Motor = -1
	spot2.Motor = 1	
	count = count - 1
	isTortue = count > 0
end

if Input:PadPressed(P_LeftShoulder) then
	isTortue = true
	spot3.Motor = -0.1
	spot1.Motor = 0.1
	count = 20
elseif isTortue then
	spot3.Motor = 1
	spot1.Motor = -1	
	count = count - 1
	isTortue = count > 0
end